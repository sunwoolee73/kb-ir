
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê³µì‹œ í†µê³„ ëŒ€ì‹œë³´ë“œ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #333; }
    .chart-container { width: 90%%; max-width: 800px; margin: 40px auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    canvas { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ğŸ“Š ê³µì‹œ í†µê³„ ëŒ€ì‹œë³´ë“œ</h1>
  <div class="chart-container">
    <h2>ğŸ“… ë‚ ì§œë³„ ê³µì‹œ ê±´ìˆ˜</h2>
    <canvas id="dateChart"></canvas>
  </div>
  <div class="chart-container">
    <h2>ğŸ¢ ê¸°ì—…ë³„ ê³µì‹œ ê±´ìˆ˜</h2>
    <canvas id="corpChart"></canvas>
  </div>
  <div class="chart-container">
    <h2>ğŸ“„ ë³´ê³ ì„œ ì¢…ë¥˜ë³„ ë¶„í¬</h2>
    <canvas id="reportChart"></canvas>
  </div>

  <script>
    async function drawCharts() {
      const response = await fetch('sample_data_extended.json');
      const data = await response.json();

      // ì§‘ê³„
      const dateCount = {};
      const corpCount = {};
      const reportCount = {};

      data.forEach(item => {
        dateCount[item.rcept_dt] = (dateCount[item.rcept_dt] || 0) + 1;
        corpCount[item.corp_name] = (corpCount[item.corp_name] || 0) + 1;
        reportCount[item.report_nm] = (reportCount[item.report_nm] || 0) + 1;
      });

      // ë‚ ì§œ ì°¨íŠ¸
      new Chart(document.getElementById('dateChart'), {
        type: 'line',
        data: {
          labels: Object.keys(dateCount).sort(),
          datasets: [{
            label: 'ê³µì‹œ ê±´ìˆ˜',
            data: Object.entries(dateCount).sort().map(e => e[1]),
            borderColor: 'blue',
            backgroundColor: 'lightblue',
            fill: true
          }]
        }
      });

      // ê¸°ì—… ì°¨íŠ¸
      new Chart(document.getElementById('corpChart'), {
        type: 'bar',
        data: {
          labels: Object.keys(corpCount),
          datasets: [{
            label: 'ê³µì‹œ ê±´ìˆ˜',
            data: Object.values(corpCount),
            backgroundColor: ['#007bff', '#28a745', '#ffc107']
          }]
        }
      });

      // ë³´ê³ ì„œ ì¢…ë¥˜ ì°¨íŠ¸
      new Chart(document.getElementById('reportChart'), {
        type: 'doughnut',
        data: {
          labels: Object.keys(reportCount),
          datasets: [{
            label: 'ê³µì‹œ ë¹„ìœ¨',
            data: Object.values(reportCount),
            backgroundColor: ['#17a2b8', '#dc3545', '#6f42c1', '#20c997']
          }]
        }
      });
    }

    drawCharts();
  </script>
</body>
</html>
